{% comment %}
Stat Card Component

Usage:
<c-stat-card
  title="Total Clients"
  value="145"
  icon="users"
  color="blue"
  trend="+12%"
  trend_type="up"
/>

Props:
- title: Card title (required)
- value: Main stat value (required)
- icon: Icon name (users, database, sync, chart, alert) (optional)
- color: Color theme (blue, green, red, yellow, purple) (default: blue)
- trend: Trend text like "+12%" or "-3%" (optional)
- trend_type: "up" or "down" (optional)
- href: Link URL (optional, makes card clickable)
{% endcomment %}

{% load cotton %}

<div class="group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden {% if href %}cursor-pointer{% endif %}"
     {{ attrs }}>

  {% if href %}
  <a href="{{ href }}" class="block">
  {% endif %}

    <div class="p-5">
      <!-- Header with Icon -->
      <div class="flex items-center justify-between mb-3">
        <div class="flex items-center gap-3">
          <!-- Icon -->
          {% if icon %}
          <div class="flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center
                      {% if color == 'blue' %}bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400
                      {% elif color == 'green' %}bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400
                      {% elif color == 'red' %}bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400
                      {% elif color == 'yellow' %}bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400
                      {% elif color == 'purple' %}bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400
                      {% else %}bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400{% endif %}">

            {% if icon == 'users' %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
            </svg>
            {% elif icon == 'database' %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
            </svg>
            {% elif icon == 'sync' %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
            </svg>
            {% elif icon == 'chart' %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
            </svg>
            {% elif icon == 'alert' %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
            </svg>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
            </svg>
            {% endif %}
          </div>
          {% endif %}

          <!-- Title -->
          <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">
            {{ title }}
          </h3>
        </div>

        <!-- Trend Badge -->
        {% if trend %}
        <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium
                     {% if trend_type == 'up' %}bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400
                     {% elif trend_type == 'down' %}bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400
                     {% else %}bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300{% endif %}">
          {% if trend_type == 'up' %}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
            <path fill-rule="evenodd" d="M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z" clip-rule="evenodd" />
          </svg>
          {% elif trend_type == 'down' %}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
            <path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd" />
          </svg>
          {% endif %}
          {{ trend }}
        </span>
        {% endif %}
      </div>

      <!-- Value -->
      <div class="flex items-baseline gap-2">
        <span class="text-3xl font-bold text-gray-900 dark:text-white">
          {{ value }}
        </span>
      </div>

      <!-- Optional Description -->
      {% if description %}
      <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
        {{ description }}
      </p>
      {% endif %}

      <!-- Slot for custom content -->
      {{ slot }}
    </div>

  {% if href %}
  </a>
  {% endif %}

</div>